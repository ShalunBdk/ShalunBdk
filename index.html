<!DOCTYPE html>
<html>

<body>
  <script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
  <script type="text/javascript" src="point.js"> </script>
  
  <script type="text/javascript">
	
	var pjs = new PointJS('2D', 1280 / 2, 720 / 2, { // 16:9
  backgroundColor : '#53769A' // if need
});

var log    = pjs.system.log;     // log = console.log;
var game   = pjs.game;           // Game Manager
var OOP    = pjs.OOP;
var brush  = pjs.brush;          // Brush, used for simple drawing

var mouse = pjs.mouseControl.initMouseControl();

pjs.system.setTitle('PointJS Clone Object'); // Set Title for Tab or Window

game.newLoopFromConstructor('myGame', function () {

  var myCursor = game.newImageObject({
    x : 10, y : 10,
    h : 100,
    alpha : 0.3,
    file : 'test_r.png',
    ondraw : function () {
      this.moveTimeC(mouse.getPosition(), 5);
    }
  });

  objs = [];
var name = 'ne robit';	

var GetUserName = function(){
		VK.api('users.get', {}, function(data){
			name = data.response[0].first_name;
		});
	};
	
  this.update = function () {
    // Update function
    game.clear(); // clear scree
    myCursor.draw(); // drawing
  GetUserName();
	  brush.drawText({
			    x : 100, y : 100,
			    text : name,
			    color : 'black',
			    size : 20	
			});
    OOP.drawArr(objs);
  };
});
	 

game.startLoop('myGame');
	

  VK.init(function() { 
    console.log('ALL GOOD');
  }, function() { 
	console.log('NOT ALL GOOD');
}, '5.62'); 

	</script>
  
</body>  
</html>
