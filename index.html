<!DOCTYPE html>
<html>

<body>
  <script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
  <script type="text/javascript" src="point.js"> </script>
  
  <script type="text/javascript">
	
var pjs = new PointJS('2D', 1280 / 2, 720 / 2, { // 16:9
  backgroundColor : '#53769A' // if need
});
// pjs.system.initFullPage(); // for Full Page mode
// pjs.system.initFullScreen(); // for Full Screen mode (only Desctop)

var log    = pjs.system.log;     // log = console.log;
var game   = pjs.game;           // Game Manager
var point  = pjs.vector.point;   // Constructor for Point
var camera = pjs.camera;         // Camera Manager
var brush  = pjs.brush;          // Brush, used for simple drawing
var OOP    = pjs.OOP;            // Object's manager
var math   = pjs.math;           // More Math-methods
var levels = pjs.levels;         // Levels manager

var mouse = pjs.mouseControl.initMouseControl();

var width  = game.getWH().w; // width of scene viewport
var height = game.getWH().h; // height of scene viewport

pjs.system.setTitle('PointJS Primitives'); // Set Title for Tab or Window

game.newLoopFromConstructor('myGame', function () {

  var primitives = [];

  primitives.push(game.newRectObject({
    x : 10, y : 10,
    w : 50, h : 50,
    fillColor : '#E38E37'
  }));

  primitives.push(game.newRoundRectObject({
    x : 70, y : 10,
    w : 50, h : 50,
    fillColor : '#E38E37',
    radius : 10
  }));

  primitives.push(game.newCircleObject({
    x : 130, y : 10,
    fillColor : '#E38E37',
    radius : 25
  }));

  primitives.push(game.newTriangleObject({
    x : 190, y : 10,
    w : 50, h : 50,
    fillColor : '#E38E37'
  }));

  primitives.push(game.newEllipsObject({
    x : 250, y : 10,
    w : 100, h : 50,
    fillColor : '#E38E37'
  }));

  primitives.push(game.newTextObject({
    x : 360, y : 10,
    color : '#E38E37',
    size : 50,
    text : 'Text'
  }));

  primitives.push(game.newImageObject({
    x : 10, y : 70,
    w : 50,
    file : 'sprite.png'
  }));

  primitives.push(game.newAnimationObject({
    x : 70, y : 70,
    w : 50, h : 40,
    animation : pjs.tiles.newAnimation('34_24_4.png', 34, 24, 4)
  }));


  var obj = false;

  this.update = function () {
    var mPos = mouse.getPosition();
    game.clear(); // clear screen

    OOP.drawArr(primitives, function (o) {

      if (mouse.isInObject(o)) {
        brush.drawRect({
          x : o.x - 4, y : o.y - 4,
          w : o.w + 6, h : o.h + 6,
          strokeColor : 'white',
          strokeWidth : 2
        });
      }

      if (mouse.isPeekObject('LEFT', o)) {
        obj = o;
      }
    });

    if (mouse.isUp('LEFT')) {
      obj = false;
    }

    if (obj) {
      obj.moveTimeC(mPos, 10);
    }


  };

});

game.startLoop('myGame');
	

  VK.init(function() { 
    console.log('ALL GOOD');
  }, function() { 
	console.log('NOT ALL GOOD');
}, '5.62'); 

	</script>
  
</body>  
</html>
