<!DOCTYPE html>
<html>

<body>
  <script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
  <script type="text/javascript" src="point.js"> </script>
  
  <script type="text/javascript">
	
	var pjs = new PointJS('2D', 1280 / 2, 720 / 2, { // 16:9
  backgroundColor : '#53769A' // if need
});

var log    = pjs.system.log;     // log = console.log;
var game   = pjs.game;           // Game Manager
var OOP    = pjs.OOP;
var brush  = pjs.brush;          // Brush, used for simple drawing

var mouse = pjs.mouseControl.initMouseControl();
	  
var primitives = [];

pjs.system.setTitle('PointJS Clone Object'); // Set Title for Tab or Window

game.newLoopFromConstructor('myGame', function () {

  var myCursor = game.newImageObject({
    x : 10, y : 10,
    h : 100,
    alpha : 0.3,
    file : 'test_r.png',
    ondraw : function () {
      this.moveTimeC(mouse.getPosition(), 5);
    }
  });

var photo;	

  objs = [];
var name = 'ne robit';	
	
var GetUserName = function(){
		VK.api('users.get', {'fields' : 'first_name, photo_200'}, function(data){
			name = data.response[0].first_name;
			photo = data.response[0].photo_200;
		});
	};

var photo_200 = game.newImageObject({
			    file : https://pp.vk.me/c633430/v633430900/516b7/nkavrO4XHIA.jpg,
			    h : 200, // Оптимальный размер санты
			    w : 200,
			    x : 100,
			    y : 100
			  });

  this.update = function () {
    // Update function
    game.clear(); // clear scree
 
    myCursor.draw(); // drawing
  GetUserName();
	  brush.drawText({
			    x : 100, y : 100,
			    text : name + ' не пидор',
			    color : 'black',
			    size : 20	
			});
    photo_200.draw();
	  OOP.drawArr(objs);
  };
});
	 

game.startLoop('myGame');
	

  VK.init(function() { 
    console.log('ALL GOOD');
  }, function() { 
	console.log('NOT ALL GOOD');
}, '5.62'); 

	</script>
  
</body>  
</html>
